<div class="chatbot-fab-container">

  <!-- BotÃ³n flotante -->
  <button class="chatbot-fab" (click)="toggleChat()">
    <span *ngIf="!isOpen">ğŸ’¬</span>
    <span *ngIf="isOpen">âœ–</span>
  </button>

  <!-- Ventana del chat -->
  <div class="chatbot-ventana" *ngIf="isOpen">

    <div class="chatbot-header">
      ğŸ¤– Asistente El Dato
      <button class="cerrar" (click)="toggleChat()">âœ–</button>
    </div>

    <div class="chatbot-mensajes">
      <div *ngFor="let msg of mensajes"
           class="mensaje"
           [ngClass]="{ 'usuario': msg.rol === 'user', 'bot': msg.rol === 'bot' }">

        <div class="burbuja">{{ msg.contenido }}</div>

      </div>
    </div>

    <div class="chatbot-input">
      <input 
        [(ngModel)]="mensajeUsuario"
        (keydown.enter)="enviar()"
        placeholder="Escribe tu mensaje..."
        [disabled]="!estaAutenticado"
      />
      <button 
        (click)="enviar()"
        [disabled]="cargando || !mensajeUsuario.trim() || !estaAutenticado">
        Enviar
      </button>
    </div>

  </div>
</div>

<!-- BotÃ³n de login Puter flotante -->
<div *ngIf="!estaAutenticado" class="login-msg">
  <button (click)="autenticarConPuter()" class="btn-login-puter">
    ğŸ” Conectar con Puter para activar el asistente
  </button>
</div>
