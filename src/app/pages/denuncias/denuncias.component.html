<div class="denuncias-container" role="region" aria-label="Gesti√≥n de denuncias">
  <!-- ===== HEADER ===== -->
  <header class="denuncias-header" role="banner">
    <div class="header-main">
      <h1 class="header-title">üö® Denuncias</h1>
      <p class="header-subtitle">
        Panel de administraci√≥n para revisar denuncias sobre rese√±as y solicitudes.
      </p>
    </div>

    <div class="header-actions">
      <button class="btn btn-refresh"
              type="button"
              (click)="refresh()"
              aria-label="Actualizar denuncias">
        üîÑ Actualizar
      </button>
    </div>
  </header>

  <!-- ===== CARD PRINCIPAL ===== -->
  <section class="section denuncias-card" aria-label="Panel de denuncias">
    <!-- Tabs -->
    <nav class="tabs-simple" role="tablist" aria-label="Tipos de denuncias">
      <button
        id="tab-resenas"
        role="tab"
        class="tab-btn-simple"
        [class.active]="activeTab === 'resenas'"
        [attr.aria-selected]="activeTab === 'resenas'"
        attr.aria-controls="panel-resenas"
        type="button"
        (click)="setActiveTab('resenas')">
        ‚≠ê Denuncias sobre rese√±as
      </button>

        <button
            id="tab-servicios"
            role="tab"
            class="tab-btn-simple"
            [class.active]="activeTab === 'servicios'"
            [attr.aria-selected]="activeTab === 'servicios'"
            attr.aria-controls="panel-servicios"
            type="button"
            (click)="setActiveTab('servicios')">
            üõ†Ô∏è Denuncias sobre servicios
        </button>
    </nav>

    <!-- =================== PANEL: DENUNCIAS DE RESE√ëAS =================== -->
    <div
      id="panel-resenas"
      role="tabpanel"
      aria-labelledby="tab-resenas"
      class="tab-panel-simple"
      [hidden]="activeTab !== 'resenas'">

      <!-- Loading / error -->
      <div class="empty-simple" *ngIf="loadingResenas">
        <div class="empty-emoji">‚è≥</div>
        <p>Cargando denuncias sobre rese√±as‚Ä¶</p>
      </div>

      <div class="empty-simple" *ngIf="!loadingResenas && errorResenas">
        <div class="empty-emoji">‚ö†Ô∏è</div>
        <p>{{ errorResenas }}</p>
      </div>

      <!-- Lista -->
      <div class="list-simple" *ngIf="!loadingResenas && !errorResenas">
        <article class="denuncia-row"
                 *ngFor="let d of denunciasResenas"
                 aria-label="Denuncia sobre rese√±a">
          <!-- Columna: info principal -->
          <div class="denuncia-col main">
            <div class="denuncia-badge">Rese√±a #{{ d.idValorizacion }}</div>
            <div class="denuncia-title">
              {{ d.resenaComentario || 'Sin comentario en la rese√±a' }}
            </div>
            <div class="denuncia-meta">
              <span>‚≠ê {{ d.resenaCantEstrellas }} / 5</span>
              <span>Autor rese√±a: {{ d.resenaAutorNombre || ('Usuario #' + d.resenaAutorId) }}</span>
              <span>Fecha rese√±a: {{ d.resenaFecha | date:'dd/MM/yyyy' }}</span>
            </div>
          </div>

          <!-- Columna: motivo de denuncia -->
          <div class="denuncia-col motivo">
            <div class="denuncia-label">Motivo de denuncia</div>
            <div class="denuncia-motivo">{{ d.motivo }}</div>
            <div class="denuncia-meta">
              Denunciante: {{ d.denuncianteNombre || ('Usuario #' + d.idUsuarioDenunciante) }}
            </div>
          </div>

          <!-- Columna: acciones (funcionalidad despu√©s) -->
          <div class="denuncia-col actions">
            <button class="action-chip btn-detail"
                    type="button"
                    (click)="verDetalleResena(d)">
              üîç Ver detalle
            </button>
            <!-- Estos botones los conectaremos despu√©s -->
            <button class="action-chip btn-danger"
                    type="button"
                    (click)="eliminarResena(d)"
                    title="Eliminar rese√±a denunciada">
              üóëÔ∏è Eliminar rese√±a
            </button>
            <button class="action-chip btn-soft"
                    type="button"
                    (click)="marcarResuelta(d)">
              ‚úÖ Marcar resuelta
            </button>
          </div>
        </article>

        <!-- Vac√≠o -->
        <div class="empty-simple" *ngIf="denunciasResenas.length === 0">
          <div class="empty-emoji">‚ú®</div>
          <h3>No hay denuncias sobre rese√±as</h3>
          <p>Cuando los usuarios reporten rese√±as, aparecer√°n aqu√≠.</p>
        </div>
      </div>
    </div>

    <!-- =================== PANEL: DENUNCIAS DE SERVICIOS =================== -->
    <div
    id="panel-servicios"
    role="tabpanel"
    aria-labelledby="tab-servicios"
    class="tab-panel-simple"
    [hidden]="activeTab !== 'servicios'">

    <!-- Loading / error -->
    <div class="empty-simple" *ngIf="loadingServicios">
        <div class="empty-emoji">‚è≥</div>
        <p>Cargando denuncias sobre servicios‚Ä¶</p>
    </div>

    <div class="empty-simple" *ngIf="!loadingServicios && errorServicios">
        <div class="empty-emoji">‚ö†Ô∏è</div>
        <p>{{ errorServicios }}</p>
    </div>

    <!-- Lista -->
    <div class="list-simple" *ngIf="!loadingServicios && !errorServicios">
        <article class="denuncia-row"
                *ngFor="let d of denunciasServicios"
                aria-label="Denuncia sobre servicio">
        <!-- Columna: info principal -->
        <div class="denuncia-col main">
            <div class="denuncia-badge">Servicio #{{ d.idServicio }}</div>
            <div class="denuncia-title">
            {{ d.servicioTitulo || 'Servicio sin t√≠tulo' }}
            </div>
            <div class="denuncia-meta">
            <span>Categor√≠a: {{ d.servicioCategoria || 'Sin categor√≠a' }}</span>
            <span>Proveedor: {{ d.proveedorNombre || ('Usuario #' + d.proveedorId) }}</span>
            </div>
        </div>

        <!-- Columna: motivo de denuncia -->
        <div class="denuncia-col motivo">
            <div class="denuncia-label">Motivo de denuncia</div>
            <div class="denuncia-motivo">{{ d.motivo }}</div>
            <div class="denuncia-meta">
            Denunciante: {{ d.denuncianteNombre || ('Usuario #' + d.idUsuarioDenunciante) }}
            </div>
        </div>

        <!-- Columna: acciones (a implementar despu√©s) -->
        <div class="denuncia-col actions">
            <button class="action-chip btn-detail"
                    type="button"
                    (click)="verDetalleServicio(d)">
            üîç Ver servicio
            </button>
            <button class="action-chip btn-danger"
                    type="button"
                    (click)="accionSobreServicio(d)">
            ‚ö†Ô∏è Acci√≥n sobre servicio
            </button>
            <button class="action-chip btn-soft"
                    type="button"
                    (click)="marcarResuelta(d)">
            ‚úÖ Marcar resuelta
            </button>
        </div>
        </article>

        <!-- Vac√≠o -->
        <div class="empty-simple" *ngIf="denunciasServicios.length === 0">
        <div class="empty-emoji">üì≠</div>
        <h3>No hay denuncias sobre servicios</h3>
        <p>Cuando los usuarios reporten servicios, aparecer√°n aqu√≠.</p>
        </div>
    </div>
    </div>

  </section>
</div>
