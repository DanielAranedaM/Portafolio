<!-- Bot√≥n para mostrar/ocultar sidebar -->
<button 
  [class]="toggleButtonClasses"
  [title]="toggleTitle"
  (click)="toggleSidebar()">
  <i class="fas" [ngClass]="sidebarVisible ? 'fa-bars' : 'fa-user'"></i>
</button>

<!-- Barra lateral de navegaci√≥n -->
<aside [class]="sidebarClasses">
  
  <!-- Secci√≥n de foto de perfil -->
  <div class="profile-photo-section">
    <!-- T√≠tulo de bienvenida -->
    <h2 class="welcome-title">Bienvenido</h2>
    
    <!-- Foto Perfil CON FUNCIONALIDAD -->
    <div class="profile-photo-large" (click)="openPhotoModal()">
      <!-- Imagen si existe -->
      <img 
        *ngIf="hasProfileImage" 
        [src]="profileImageUrl" 
        alt="Foto de perfil">
      <!-- Iniciales si no hay imagen -->
      <span *ngIf="!hasProfileImage" class="profile-initials-large">{{ userInitials }}</span>
      <!-- Overlay de c√°mara -->
      <div class="camera-overlay">
        <i class="fas fa-camera"></i>
      </div>
    </div>
    
    <!-- Informaci√≥n del usuario -->
    <div class="profile-info">
      <h3 class="profile-name">{{ userName }}</h3>
      
      <!-- Clasificaci√≥n solo para proveedores -->
      <div class="rating-section" *ngIf="userRole === 'proveedor'">
        <div class="stars" [attr.aria-label]="'Calificaci√≥n ' + (userRating ?? 0 | number:'1.1-1') + ' de 5'">
          <ng-container *ngIf="userRating !== null && userRating > 0; else noRating">
            <ng-container *ngFor="let s of getStarStates(userRating)">
              <span>{{ starIcon(s) }}</span>
            </ng-container>
          </ng-container>
          <ng-template #noRating>
            <span>‚òÜ‚òÜ‚òÜ‚òÜ‚òÜ</span>
          </ng-template>
        </div>
        <span class="rating-text">
          {{ (userRating ?? 0) | number:'1.1-1' }}
        </span>
      </div>
    </div>
  </div>

  <!-- Men√∫ de navegaci√≥n seg√∫n el rol -->
  <nav class="profile-navigation">
    
    <!-- Opciones para Proveedor -->
    <ng-container *ngIf="userRole === 'proveedor'">
      <button class="nav-btn" (click)="routePerfil()">
        <i class="fas fa-user nav-icon"></i>
        <span class="nav-text">Mi Perfil</span>
      </button>
      
      <button class="nav-btn" (click)="navigateToHistorialSolicitudes()">
        <i class="fas fa-calendar-check nav-icon"></i>
        <span class="nav-text">Solicitudes Agendadas</span>
      </button>

      <button class="nav-btn" (click)="navigateToMyServices()">
        <i class="fas fa-tools nav-icon"></i>
        <span class="nav-text">Mis Servicios</span>
      </button>
      
      <button class="nav-btn" (click)="routeRegistrarServicio()">
        <i class="fas fa-plus-circle nav-icon"></i>
        <span class="nav-text">Publicar Servicio</span>
      </button>
      
      <button class="nav-btn" (click)="navigateToMyReviews()">
        <i class="fas fa-star nav-icon"></i>
        <span class="nav-text">Mis Rese√±as</span>
      </button>
    
    </ng-container>

    <!-- Opciones para Cliente -->
    <ng-container *ngIf="userRole === 'cliente'">
      <button class="nav-btn" (click)="routePerfil()">
        <i class="fas fa-user nav-icon"></i>
        <span class="nav-text">Mi Perfil</span>
      </button>
      
      <button class="nav-btn" (click)="navigateToSavedServices()">
        <i class="fas fa-bookmark nav-icon"></i>
        <span class="nav-text">Servicios Guardados</span>
      </button>

      <button class="nav-btn" (click)="navigateToHistorialSolicitudes()">
        <i class="fas fa-calendar-check nav-icon"></i>
        <span class="nav-text">Solicitudes Agendadas</span>
      </button>

            
      <button class="nav-btn" (click)="navigateToMyReviews()">
        <span class="nav-icon">‚≠ê</span>
        <span class="nav-text">Mis Rese√±as</span>
      </button>

    <!-- Cerrar sesi√≥n (com√∫n para ambos) -->
    <button class="nav-btn logout-btn" (click)="openLogoutModal()">
      <i class="fas fa-sign-out-alt nav-icon"></i>
      <span class="nav-text">Cerrar Sesi√≥n</span>
    </button>
  </ng-container>
    
    
  </nav>
  
</aside>

<!-- MODAL PARA SELECCIONAR FOTO -->
<div *ngIf="photoModalVisible" class="modal" (click)="onModalBackdropClick($event)">
  <div class="modal-content" (click)="$event.stopPropagation()">
    <span class="close" (click)="closePhotoModal()">&times;</span>
    <h3>Cambiar foto de perfil</h3>
    <button (click)="takePhoto()">üì∑ Tomar foto</button>
    <button (click)="uploadPhoto()">üìÅ Subir archivo</button>
    <button *ngIf="hasProfileImage" (click)="removePhoto()" style="background: #f44336;">üóëÔ∏è Eliminar foto</button>
  </div>
</div>

<!-- MODAL DE C√ÅMARA -->
<div *ngIf="cameraModalVisible" class="camera-modal" (click)="onCameraBackdropClick($event)">
  <div class="camera-container" (click)="$event.stopPropagation()">
    <div class="camera-header">
      <h3>Tomar foto</h3>
      <button class="close-camera" (click)="closeCameraModal()">&times;</button>
    </div>
    
    <div class="camera-content">
      <video id="cameraVideo" autoplay playsinline muted></video>
      <canvas id="photoCanvas" style="display: none;"></canvas>
    </div>
    
    <div class="camera-controls">
      <button class="camera-btn switch-btn" (click)="switchCamera()" title="Cambiar c√°mara">
        Cambiar C√°mara
      </button>
      <button class="camera-btn capture-btn" (click)="capturePhoto()" title="Capturar foto">
        TOMAR FOTO
      </button>
      <button class="camera-btn cancel-btn" (click)="closeCameraModal()" title="Cancelar">
        Cancelar
      </button>
    </div>
  </div>
</div>

<!-- INPUTS OCULTOS PARA MANEJO DE ARCHIVOS -->
<input 
  type="file" 
  id="cameraInput" 
  accept="image/*" 
  capture="camera" 
  style="display: none;" 
  (change)="handlePhotoUpload($event)">

<input 
  type="file" 
  id="fileInput" 
  accept="image/*" 
  style="display: none;" 
  (change)="handlePhotoUpload($event)">

<!-- Contenido principal -->
<main [class]="mainContentClasses">
    
    <!-- ========== DASHBOARD PARA CLIENTES ========== -->
    <div *ngIf="isCliente" class="platform-container">
        <header class="platform-header">
            <div class="logo">
                <i class="fas fa-search logo-icon"></i>
                <h1 class="logo-text">EL DATO</h1>
            </div>
        </header>

        <!-- Barra de b√∫squeda -->
        <section class="search-section">
            <div class="search-bar">
                <input
                  type="text"
                  placeholder="¬øQu√© Dato necesitas hoy?"
                  id="searchInput"
                  (keyup.enter)="buscarServicio()"
                />
                <button class="search-btn" (click)="buscarServicio()">Buscar</button>
            </div>
        </section>

        <!-- Vista de Categor√≠as (SIEMPRE visible el header y el bot√≥n) -->
        <section class="categories-section-improved" *ngIf="!categoriaSeleccionada">
          <div class="categories-header">
            <h2 class="section-main-title">
              <span class="title-emoji"></span>
              Encuentra el servicio que necesitas
            </h2>

            <!-- Bot√≥n √∫nico con estilo de "Ver Categor√≠as" -->
            <div class="search-return">
              <button
                class="btn-empty-action"
                (click)="toggleCategoriasVisibility()"
                [attr.aria-pressed]="categoriasVisibles"
                title="{{ categoriasVisibles ? 'Ocultar Categor√≠as' : 'Ver Categor√≠as' }}"
              >
                {{ categoriasVisibles ? 'Ocultar Categor√≠as' : 'Ver Categor√≠as' }}
              </button>
            </div>
          </div>

          <!-- Loading -->
          <div *ngIf="categoriasLoading" class="loading-state">
            <div class="loading-icon">‚è≥</div>
            <p class="loading-text">Cargando categor√≠as...</p>
          </div>

          <!-- Error -->
          <div *ngIf="!categoriasLoading && categoriasError" class="error-state">
            <div class="error-icon">‚ö†Ô∏è</div>
            <p class="error-text">{{ categoriasError }}</p>
          </div>

          <!-- Grid de Categor√≠as (solo se oculta/ muestra esta parte) -->
          <div
            class="categories-grid-improved"
            *ngIf="!categoriasLoading && !categoriasError && categoriasVisibles"
          >
            <div
              class="category-card-improved"
              *ngFor="let cat of categorias; let i = index"
              (click)="seleccionarCategoria(cat)"
              [attr.data-category-index]="i"
              title="Ver servicios cercanos en {{cat.nombre}}"
            >
              <div class="category-emoji-large">{{ getCategoryEmoji(cat.nombre) }}</div>
              <h3 class="category-name-large">{{ cat.nombre }}</h3>
              <p class="category-description-large">
                {{ cat.descripcion || 'Servicios disponibles en tu zona' }}
              </p>
              <div class="category-badge-improved">
                <span class="badge-icon">üìç</span>
                <span class="badge-text">{{ getServiceCount(cat) }} servicios</span>
              </div>
            </div>
          </div>
        </section>

        <!-- Vista de Servicios (cuando se selecciona una categor√≠a) -->
        <section *ngIf="categoriaSeleccionada" class="services-view-section">
            <div class="services-header">
                <button class="btn-back" (click)="volverACategorias()">
                    <span class="back-icon">‚Üê</span>
                    <span class="back-text">Volver</span>
                </button>
                <h2 class="services-view-title">
                    <span class="title-emoji">{{ getCategoryEmoji(categoriaSeleccionada.nombre) }}</span>
                    {{ categoriaSeleccionada.nombre }}
                    <span class="services-count" *ngIf="!serviciosLoading && serviciosDeCategoria">
                        ({{ serviciosDeCategoria.length }} servicios)
                    </span>
                </h2>
            </div>

            <!-- Loading servicios -->
            <div *ngIf="serviciosLoading" class="loading-state">
                <div class="loading-icon">‚è≥</div>
                <p class="loading-text">Buscando servicios cercanos...</p>
            </div>

            <!-- Sin resultados -->
            <div *ngIf="!serviciosLoading && serviciosDeCategoria.length === 0" class="empty-services-state">
                <div class="empty-icon">üòî</div>
                <h3 class="empty-title">No hay servicios disponibles</h3>
                <p class="empty-text">
                    No encontramos servicios en esta categor√≠a cerca de ti por ahora.
                    Intenta con otra categor√≠a o vuelve m√°s tarde.
                </p>
                <button class="btn-empty-action" (click)="volverACategorias()">
                    Ver otras categor√≠as
                </button>
            </div>

            <!-- Lista de Servicios -->
            <div class="services-list-view" *ngIf="!serviciosLoading && serviciosDeCategoria.length">
              <div 
                class="service-card-large" 
                *ngFor="let servicio of serviciosDeCategoria"
                [ngClass]="{ 'senior-service-card': servicio.esMayorDeEdad }"
              >
                    <!-- Header del Servicio -->
                    <div class="service-card-header">
                        <div class="provider-avatar">
                            <span class="avatar-initials">{{ getProviderInitials(servicio.proveedorNombre) }}</span>
                        </div>
                        <div class="provider-info">
                            <h3 class="provider-name">{{ servicio.proveedorNombre || 'Proveedor' }}</h3>
                            <div class="provider-rating">
                                <span class="rating-stars">‚≠ê</span>
                                <span class="rating-value">5.0</span>
                                <span class="rating-count">(0)</span>
                            </div>
                        </div>
                    </div>

                    <!-- Foto de Portada del Servicio -->
                    <div class="service-card-image">
                        <img 
                            *ngIf="servicio.urlFotoPrincipal; else placeholderImage" 
                            [src]="servicio.urlFotoPrincipal" 
                            [alt]="servicio.titulo" 
                            class="service-image"
                            (error)="onImageError($event)">
                        <ng-template #placeholderImage>
                            <div class="service-image-placeholder">
                                <i class="fas fa-image placeholder-icon"></i>
                                <p class="placeholder-text">Sin imagen</p>
                            </div>
                        </ng-template>
                        <div class="image-overlay" *ngIf="servicio.urlFotoPrincipal"></div>
                    </div>

                    <!-- T√≠tulo y Descripci√≥n -->
                    <div class="service-card-body">
                        <h4 class="service-title-large">{{ servicio.titulo }}</h4>
                        <p class="service-description-large">{{ servicio.descripcion || 'Servicio profesional disponible en tu zona' }}</p>
                    </div>

                    <!-- Informaci√≥n Clave -->
                    <div class="service-card-meta">
                        <div class="meta-item">
                            <span class="meta-icon">üìç</span>
                            <span class="meta-text">{{ servicio.ubicacion || 'Santiago, RM' }}</span>
                        </div>
                        <div class="meta-item meta-item-highlight" *ngIf="servicio.precioBase">
                            <span class="meta-icon">üí∞</span>
                            <span class="meta-text">Desde ${{ servicio.precioBase | number:'1.0-0' }}</span>
                        </div>
                    </div>

                    <!-- Botones de Acci√≥n -->
                    <div class="service-card-actions">
                        <button class="btn-service-action btn-whatsapp" (click)="contactarProveedor(servicio)">
                            <i class="fab fa-whatsapp btn-icon"></i>
                            <span class="btn-text">WhatsApp</span>
                        </button>
                        <button class="btn-service-action btn-save" (click)="guardarServicio(servicio)">
                            <span class="btn-icon">üíæ</span>
                            <span class="btn-text">Guardar</span>
                        </button>
                        <button class="btn-service-action btn-view" (click)="verDetalleServicioCliente(servicio)">
                            <span class="btn-icon">üëÅÔ∏è</span>
                            <span class="btn-text">Ver m√°s</span>
                        </button>

                        <!-- üö© Denunciar servicio -->
                        <button class="btn-service-action btn-report" (click)="openServiceReportModal(servicio)">
                            <span class="btn-icon">üö©</span>
                            <span class="btn-text">Denunciar</span>
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <!-- RESULTADOS DE B√öSQUEDA (debajo de las categor√≠as, sin ocultarlas) -->
        <section 
          class="services-view-section" 
          *ngIf="!categoriaSeleccionada && (searchLoading || searchError || searchResults.length)"
        >
          <div class="services-header">
            <h2 class="services-view-title">
              Resultados de b√∫squeda
              <span class="services-count" *ngIf="!searchLoading">
                ({{ searchResults.length }} servicios)
              </span>
            </h2>
          </div>

          <!-- Loading b√∫squeda -->
          <div *ngIf="searchLoading" class="loading-state">
            <div class="loading-icon">‚è≥</div>
            <p class="loading-text">Buscando servicios...</p>
          </div>

          <!-- Error / vac√≠o -->
          <div *ngIf="!searchLoading && searchError" class="empty-services-state">
            <div class="empty-icon">üòî</div>
            <h3 class="empty-title">Sin resultados</h3>
            <p class="empty-text">{{ searchError }}</p>
          </div>

          <!-- Lista de Servicios (mismo dise√±o de tarjetas) -->
          <div class="services-list-view" *ngIf="!searchLoading && searchResults.length">
            <div 
              class="service-card-large" 
              *ngFor="let servicio of searchResults"
              [ngClass]="{ 'senior-service-card': servicio.esMayorDeEdad }"
            >
              <!-- Header del Servicio -->
              <div class="service-card-header">
                <div class="provider-avatar">
                  <span class="avatar-initials">{{ getProviderInitials(servicio.proveedorNombre) }}</span>
                </div>
                <div class="provider-info">
                  <h3 class="provider-name">{{ servicio.proveedorNombre || 'Proveedor' }}</h3>
                  <div class="provider-rating">
                    <span class="rating-stars">‚≠ê</span>
                    <span class="rating-value">5.0</span>
                    <span class="rating-count">(0)</span>
                  </div>
                </div>
              </div>

              <!-- Foto -->
              <div class="service-card-image">
                <img 
                  *ngIf="servicio.urlFotoPrincipal; else placeholderImageSearch" 
                  [src]="servicio.urlFotoPrincipal" 
                  [alt]="servicio.titulo" 
                  class="service-image">
                <ng-template #placeholderImageSearch>
                  <div class="service-image-placeholder">
                    <i class="fas fa-image placeholder-icon"></i>
                    <p class="placeholder-text">Sin imagen</p>
                  </div>
                </ng-template>
                <div class="image-overlay" *ngIf="servicio.urlFotoPrincipal"></div>
              </div>

              <!-- T√≠tulo y Descripci√≥n -->
              <div class="service-card-body">
                <h4 class="service-title-large">{{ servicio.titulo }}</h4>
                <p class="service-description-large">{{ servicio.descripcion || 'Servicio profesional disponible en tu zona' }}</p>
              </div>

              <!-- Meta -->
              <div class="service-card-meta">
                <div class="meta-item">
                  <span class="meta-icon">üìç</span>
                  <span class="meta-text">{{ servicio.ubicacion || 'Santiago, RM' }}</span>
                </div>
                <div class="meta-item meta-item-highlight" *ngIf="servicio.precioBase">
                  <span class="meta-icon">üí∞</span>
                  <span class="meta-text">Desde ${{ servicio.precioBase | number:'1.0-0' }}</span>
                </div>
              </div>

              <!-- Acciones -->
              <div class="service-card-actions">
                <button class="btn-service-action btn-whatsapp" (click)="contactarProveedor(servicio)">
                  <i class="fab fa-whatsapp btn-icon"></i>
                  <span class="btn-text">WhatsApp</span>
                </button>
                <button class="btn-service-action btn-save" (click)="guardarServicio(servicio)">
                  <span class="btn-icon">üíæ</span>
                  <span class="btn-text">Guardar</span>
                </button>
                <button class="btn-service-action btn-view" (click)="verDetalleServicioCliente(servicio)">
                  <span class="btn-icon">üëÅÔ∏è</span>
                  <span class="btn-text">Ver m√°s</span>
                </button>
                <!-- üö© Denunciar servicio -->
                <button class="btn-service-action btn-report" (click)="openServiceReportModal(servicio)">
                  <span class="btn-icon">üö©</span>
                  <span class="btn-text">Denunciar</span>
                </button>
              </div>
            </div>
          </div>
        </section>

        <!-- B√∫squedas Recientes (solo cuando no hay categor√≠a seleccionada) -->
        <section class="recent-searches" *ngIf="recentSearches.length > 0">
          <h3 class="recent-title">
            <i class="fas fa-clock recent-icon"></i>
            B√∫squedas Recientes
          </h3>
          <div 
            class="search-item" 
            *ngFor="let term of recentSearches" 
            (click)="buscarReciente(term)">
            <div class="search-item-icon">üîç</div>
            <span class="search-item-text">{{ term }}</span>
          </div>
        </section>

    </div>

  <!-- ========== DASHBOARD PARA PROVEEDORES ========== -->
  <div *ngIf="isProveedor" class="proveedor-dashboard">
    <!-- Header del Dashboard -->
    <header class="proveedor-header">
      <div class="proveedor-title-section">
        <div class="proveedor-icon">üë∑</div>
        <div>
          <h1 class="proveedor-title">Mi Negocio</h1>
          <p class="proveedor-subtitle">Panel del Proveedor</p>
        </div>
      </div>
    </header>

    <!-- Tarjetas de Estad√≠sticas -->
    <section class="stats-section">
      <div class="stat-card">
        <div class="stat-icon services-icon">üîß</div>
        <div class="stat-content">
        <div class="stat-number">{{ proveedorStats.serviciosActivos }}</div>
        <div class="stat-label">Servicios Activos</div>
        </div>
      </div>

      <div class="stat-card">
        <div class="stat-icon contacts-icon">üìû</div>
        <div class="stat-content">
        <div class="stat-number">{{ proveedorStats.contactosEsteMes }}</div>
        <div class="stat-label">Contactos Este Mes</div>
        </div>
      </div>

      <div class="stat-card">
        <div class="stat-icon rating-icon">‚≠ê</div>
        <div class="stat-content">
          <div class="stat-number">{{ userRating || '0.0' }}</div>
          <div class="stat-label">Rating ({{ proveedorStats.totalResenas }})</div>
        </div>
      </div>
    </section>

    <!-- Bot√≥n Principal de Acci√≥n -->
    <section class="main-action-section">
      <button class="btn-main-action" (click)="routeRegistrarServicio()">
        <span class="btn-icon">‚ûï</span>
        <span class="btn-text">Publicar Nuevo Servicio</span>
      </button>
    </section>

    <!-- Mis Servicios Publicados -->
    <section class="services-list-section">
      <div class="section-header">
        <h2 class="section-title">
          <span class="title-icon">üìã</span>
          Mis Servicios Publicados
        </h2>
      </div>

    <div class="services-list" *ngIf="misServicios.length > 0; else noServices">
      <div class="service-item" *ngFor="let servicio of misServicios">
        <div class="service-item-header">
          <div class="service-item-title-section">
            <h3 class="service-item-title">{{ servicio.titulo }}</h3>
            <span class="service-item-category">{{ servicio.categoria }}</span>
          </div>
        </div>
              
        <div class="service-item-stats">
          <div class="service-stat">
            <span class="service-stat-icon">üìû</span>
            <span class="service-stat-value">{{ servicio.contactos }} contactos</span>
          </div>
        </div>
      </div>
    </div>

      <ng-template #noServices>
        <div class="empty-state">
          <div class="empty-icon">üìù</div>
          <h3 class="empty-title">No tienes servicios publicados</h3>
          <p class="empty-text">Publica tu primer servicio para que los clientes puedan encontrarte</p>
          <button class="btn-empty-action" (click)="routeRegistrarServicio()">
            ‚ûï Publicar Mi Primer Servicio
          </button>
        </div>
      </ng-template>
    </section>

    <!-- Rese√±as Recientes -->
    <section class="reviews-section">
      <div class="section-header">
        <h2 class="section-title">
          <span class="title-icon">‚≠ê</span>
          Rese√±as Recientes
        </h2>
        <button class="btn-view-all" (click)="verTodasResenas()">Ver todas ‚Üí</button>
      </div>

      <div class="reviews-list" *ngIf="ultimasResenas.length > 0; else noReviews">
        <div class="review-item" *ngFor="let resena of ultimasResenas">
          <div class="review-header">
            <div class="review-stars">{{ renderStars(resena.rating) }}</div>
            <div class="review-date">{{ resena.fecha | date:'dd/MM/yyyy' }}</div>
          </div>
          <p class="review-comment">"{{ resena.comentario }}"</p>
          <p class="review-author">- {{ resena.nombreCliente }}</p>
        </div>
      </div>

      <ng-template #noReviews>
        <div class="empty-state-small">
          <div class="empty-icon-small">üåü</div>
          <p class="empty-text-small">A√∫n no tienes rese√±as. Cuando completes servicios, los clientes podr√°n dejarte sus comentarios.</p>
        </div>
      </ng-template>
    </section>
  </div>

</main>

<!-- Modal de detalle del servicio (GLOBAL) -->
<app-servicio-detalle-modal
  *ngIf="showDetailModal && selectedServiceId"
  [servicioId]="selectedServiceId"
  (close)="closeDetailModal()"
  (contactar)="handleContactar($event)"
  (guardar)="handleGuardar($event)"
  (solicitar)="handleSolicitar($event)">
</app-servicio-detalle-modal>

<!-- MODAL: DENUNCIAR SERVICIO -->
<div *ngIf="serviceReportModalVisible"
     class="logout-modal-overlay"
     (click)="closeServiceReportModal()">

  <div class="logout-modal-content" (click)="$event.stopPropagation()">
    <div class="logout-modal-header">
      <div class="logout-modal-icon">
        <span class="logout-icon">üö©</span>
      </div>
      <button class="close-logout-btn" (click)="closeServiceReportModal()">√ó</button>
    </div>

    <div class="logout-modal-body">
      <h3>Denunciar servicio</h3>
      <p *ngIf="serviceReportTarget">
        Est√°s denunciando el servicio:
        <strong>{{ serviceReportTarget.titulo }}</strong>
      </p>

      <div class="form-row">
        <label>Motivo</label>
        <select [(ngModel)]="serviceReportForm.motivo">
          <option [ngValue]="''" disabled>Selecciona un motivo‚Ä¶</option>
          <option>Contenido inapropiado</option>
          <option>Informaci√≥n falsa</option>
          <option>Estafa o actividad sospechosa</option>
          <option>Spam / Publicidad</option>
          <option>Otro</option>
        </select>
      </div>

      <div class="form-row">
        <label>Detalle (opcional)</label>
        <textarea rows="3"
                  [(ngModel)]="serviceReportForm.detalle"
                  placeholder="Describe brevemente qu√© ocurri√≥‚Ä¶"></textarea>
      </div>
    </div>

    <div class="logout-modal-footer">
      <button class="logout-btn-cancel" (click)="closeServiceReportModal()">
        Cancelar
      </button>
      <button class="logout-btn-confirm" (click)="sendServiceReport()">
        Enviar denuncia
      </button>
    </div>
  </div>
</div>

<!-- MODAL DE CONFIRMACI√ìN PARA CERRAR SESI√ìN -->
<div *ngIf="logoutModalVisible" class="logout-modal-overlay" (click)="closeLogoutModal()">
  <div class="logout-modal-content" (click)="$event.stopPropagation()">
    <div class="logout-modal-header">
      <div class="logout-modal-icon">
        <span class="logout-icon">üö™</span>
      </div>
      <button class="close-logout-btn" (click)="closeLogoutModal()">√ó</button>
    </div>
    
    <div class="logout-modal-body">
      <h3>¬øCerrar Sesi√≥n?</h3>
      <p>¬øEst√°s seguro de que deseas cerrar tu sesi√≥n?</p>
      <p class="logout-warning">Tendr√°s que iniciar sesi√≥n nuevamente para acceder a tu cuenta.</p>
    </div>
    
    <div class="logout-modal-footer">
      <button class="logout-btn-cancel" (click)="closeLogoutModal()">
        Cancelar
      </button>
      <button class="logout-btn-confirm" (click)="confirmLogout()">
        S√≠, Cerrar Sesi√≥n
      </button>
    </div>
  </div>
</div>

<!-- MODAL DE NOTIFICACI√ìN (√âxito/Error) -->
<div *ngIf="notificationModalOpen" class="custom-modal-overlay" (click)="closeNotification()">
  <div class="custom-modal-content notification-modal" (click)="$event.stopPropagation()">
    <div class="custom-modal-header">
      <div class="custom-modal-icon" [ngClass]="notificationType">
        <span *ngIf="notificationType === 'success'">‚úÖ</span>
        <span *ngIf="notificationType === 'error'">‚ö†Ô∏è</span>
      </div>
      <button class="close-custom-btn" (click)="closeNotification()">√ó</button>
    </div>
    
    <div class="custom-modal-body">
      <h3>{{ notificationType === 'success' ? '¬°√âxito!' : 'Atenci√≥n' }}</h3>
      <p>{{ notificationMessage }}</p>
    </div>
    
    <div class="custom-modal-footer">
      <button class="custom-btn-primary" (click)="closeNotification()">
        Entendido
      </button>
    </div>
  </div>
</div>
<app-chatbot-inteligente></app-chatbot-inteligente>
